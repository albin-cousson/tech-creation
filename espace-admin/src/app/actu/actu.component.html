<div class="masque" *ngIf="addActu || putActu" (click)="addActu=false || putActu=false || addActuFormGroup.reset() || imagePreviewAddActu='' || putActuFormGroup.reset()"></div>
<div class="blockActu">
  <div> 
    <mat-form-field>
      <mat-label>Filter</mat-label>
      <input matInput (keyup)="applyFilter($event)" placeholder="Ex. ium" #input>
    </mat-form-field>
    <button mat-raised-button (click)="addActu=true">Ajouter un article</button>
  </div>
  <table mat-table [dataSource]="actu" class="mat-elevation-z8 w-100">
    <ng-container matColumnDef="nom">
      <th mat-header-cell *matHeaderCellDef> Nom </th>
      <td mat-cell *matCellDef="let element"> {{element.nomDuRedacteur}} </td>
    </ng-container>

    <ng-container matColumnDef="prenom">
        <th mat-header-cell *matHeaderCellDef> Prénom </th>
        <td mat-cell *matCellDef="let element"> {{element.prenomDuRedacteur}} </td>
      </ng-container>

    <ng-container matColumnDef="date">
      <th mat-header-cell *matHeaderCellDef> Date </th>
      <td mat-cell *matCellDef="let element"> {{element.dateDeCreation}} </td>
    </ng-container> 

    <ng-container matColumnDef="article">
      <th mat-header-cell *matHeaderCellDef> Article </th>
      <td mat-cell *matCellDef="let element"> {{element.text}} </td>
    </ng-container>

    <ng-container matColumnDef="like">
        <th mat-header-cell *matHeaderCellDef> Like </th>
        <td mat-cell *matCellDef="let element"> {{element.like}} </td>
    </ng-container>

    <ng-container matColumnDef="commentaire">
        <th mat-header-cell *matHeaderCellDef> Commentaire </th>
        <td mat-cell *matCellDef="let element"> {{element.commentaire}} </td>
    </ng-container>

    <ng-container matColumnDef="modifier">
        <th mat-header-cell *matHeaderCellDef> Modifier </th>
        <td mat-cell *matCellDef="let element"> <mat-icon (click)="actuForPutFnct(element._id, element.nomDuRedacteur, element.prenomDuRedacteur, element.dateDeCreation, element.imageUrl, element.text) || putActu=true">edit</mat-icon> </td>
    </ng-container>

    <ng-container matColumnDef="supprimer">
        <th mat-header-cell *matHeaderCellDef> Supprimer </th>
        <td mat-cell *matCellDef="let element"> <mat-icon (click)="deleteActuFromServer(element._id)">delete_forever</mat-icon> </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="actuDisplayColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: actuDisplayColumns;"></tr>
  </table> 
  <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
</div>

<div *ngIf="addActu" class="blockForm">
  <form class="form" [formGroup]="addActuFormGroup">
    <mat-icon (click)="addActu=false || addActuFormGroup.reset() || imagePreviewAddActu=''">clear</mat-icon>
    <mat-form-field>
        <mat-label>Votre nom</mat-label>
        <input matInput formControlName="nomDuRedacteur" ngModel>
    </mat-form-field>
    <mat-form-field>
        <mat-label>Votre prénom</mat-label>  
        <input matInput formControlName="prenomDuRedacteur" ngModel>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Date</mat-label>
      <input matInput formControlName="dateDeCreation" ngModel>
    </mat-form-field>
    <button mat-raised-button type="button" (click)="filePicker.click()">Ajouter une image</button>
    <input type="file" #filePicker (change)="onImagePickAddActu($event)">
    <div class="image-preview" *ngIf="imagePreviewAddActu">
      <img [src]="imagePreviewAddActu" alt="">
    </div>
    <mat-form-field>
      <mat-label>Article</mat-label>
      <textarea matInput formControlName="text" ngModel></textarea>
    </mat-form-field>
    <button mat-raised-button type="submit" (click)="onSubmitaddActuFormGroup() || addActu=false || addActuFormGroup.reset() || imagePreviewAddActu=''" [disabled]="addActuFormGroup.invalid">Enregistrer</button>
  </form>
</div>

<div *ngIf="putActu" class="blockForm">
  <form [formGroup]="putActuFormImageArticleGroup">
    <button mat-raised-button type="button" (click)="filePickerArticle.click()">Ajouter une image</button>
    <input type="file" #filePickerArticle (change)="onImagePickPutImageArticleActu($event)">
  </form>
  <form class="form" [formGroup]="putActuFormGroup">
    <mat-icon (click)="putActu=false">clear</mat-icon>
    <mat-form-field>
      <mat-label>Votre nom</mat-label>
      <input matInput formControlName="nomDuRedacteur" ngModel="{{actuForPut.nomDuRedacteur}}">
    </mat-form-field>
    <mat-form-field>
        <mat-label>Votre prénom</mat-label> 
        <input matInput formControlName="prenomDuRedacteur" ngModel="{{actuForPut.prenomDuRedacteur}}">
      </mat-form-field>
    <mat-form-field>
      <mat-label>Date</mat-label>
      <input matInput formControlName="dateDeCreation" ngModel="{{actuForPut.dateDeCreation}}">
    </mat-form-field>
    <button mat-raised-button type="button" (click)="filePicker.click()">Ajouter une image</button>
    <input type="file" #filePicker (change)="onImagePickPutActu($event)">
    <div class="image-preview" *ngIf="imagePreviewPutActu">
      <img [src]="imagePreviewPutActu" alt="">
    </div>
    <mat-form-field> 
      <mat-label>Article</mat-label>
      <textarea matInput formControlName="text" ngModel="{{actuForPut.text}}"></textarea>
    </mat-form-field>
    <button mat-raised-button type="submit" (click)="onSubmitPutActuFormGroup() || putActu=false">Enregistrer</button>
  </form>
</div>